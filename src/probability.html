<!DOCTYPE html>
<meta charset="utf-8">
<style>

.bar rect {
  fill: steelblue;
}

.bar text {
  fill: #fff;
  font: 10px sans-serif;
}

.svg-container { 
	display: inline-block;
	position: relative;
	width: 100%;
	padding-bottom: 50%; 
	vertical-align: top; 
	overflow: hidden; 
}

.svg-content { 
	display: inline-block;
	position: absolute;
	top: 0;
	left: 0;
}
</style>

<a-header on-num-retries-changed="$ctrl.onNumRetriesChanged(numRetries)" on-cards-array-changed="$ctrl.onCardsArrayChanged(enabledArray)" on-card-values-array-changed="$ctrl.onCardValuesArrayChanged(valuesArray)"></a-header>
<div class="container">
	<div class="col-lg-6">
		<div class="form-group">
          <label>Eze Salary</label>
          <input type="number" class="form-control" placeholder="Eze Salary" min="1" max="1000000" ng-model="$ctrl.ezeSalary" ng-blur="$ctrl.salaryValuesChanged()">
        </div>
		<div>
			<label>Output</label>
			{{$ctrl.salaryOut}}
		</div>
	</div>
</div>
<div class="container">
	<div class="col-lg-6">
		<div class="col-md-12">
			<div class="col-sm-6" ng-show="$ctrl.cards[0].use">
			 	<div id="card0" collapsible-panel panel-title="Card 1 Possibilities" badge-value="$ctrl.cards[0].expectedValue" show-badge=true>
			  		<div class="svg-container">
						<svg class="svg-content" id="card0Prob" viewBox="0 0 400 200" preserveAspectRatio="xMinYMin meet" ></svg>
					</div>
				</div>
			</div>
			<div class="col-sm-6" ng-show="$ctrl.cards[1].use">
			 	<div id="card1" collapsible-panel panel-title="Card 2 Possibilities" badge-value="$ctrl.cards[1].expectedValue" show-badge=true>
			  		<div class="svg-container">
						<svg class="svg-content" id="card1Prob" viewBox="0 0 400 200" preserveAspectRatio="xMinYMin meet" ></svg>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-lg-6">
		<div class="col-md-12">
			<div class="col-sm-6" ng-show="$ctrl.cards[2].use">
			 	<div id="card2" collapsible-panel panel-title="Card 3 Possibilities" badge-value="$ctrl.cards[2].expectedValue" show-badge=true>
			  		<div class="svg-container">
						<svg class="svg-content" id="card2Prob" viewBox="0 0 400 200" preserveAspectRatio="xMinYMin meet" ></svg>
					</div>
				</div>
			</div>
			<div class="col-sm-6" ng-show="$ctrl.cards[3].use">
			 	<div id="card3" collapsible-panel panel-title="Card 4 Possibilities" badge-value="$ctrl.cards[3].expectedValue" show-badge=true>
			  		<div class="svg-container">
						<svg class="svg-content" id="card3Prob" viewBox="0 0 400 200" preserveAspectRatio="xMinYMin meet" ></svg>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12">
		 	<div id="card3" collapsible-panel panel-title="Combined Possibilities" badge-value="$ctrl.handExpectedValue" show-badge=true>
		  		<div class="svg-container">
				  	<div class="svg-container">
						<svg class="svg-content" id="handProb" viewBox="0 0 400 200" preserveAspectRatio="xMinYMin meet" ></svg>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12">
			<div class="panel panel-default">
			  <div class="panel-heading">
			    <h3 class="panel-title">What about each possible number?</h3>
			  </div>
			  <div class="panel-body">
				  <table class="table">
					  <caption>Probabilities for each card number:</caption>
					  <thead>
					  	<tr>
					  		<th>Id</th>
					  		<th>Fraction</th>
					  		<th>Decimal</th>
					  		<th>Percentage</th>
					  		<th>Cumulative Percentage</th>
					  	</tr>
					  </thead>
					  <tbody>
						  <tr ng-repeat="suit in $ctrl.genericDeckCumulativeData">
					  		<tH>{{suit.id}}</th>
					  		<td>{{suit.count}} / {{$ctrl.genericDeck.length}}</td>
					  		<td>{{suit.count / $ctrl.genericDeck.length | number:4}}</td>
					  		<td>{{suit.count / $ctrl.genericDeck.length * 100 | number:2}}%</td>
					  		<td>{{suit.cumulativeCount / $ctrl.genericDeck.length * 100 | number:0}}%</td>
					  	</tr>
					  </tbody>
				  </table>

			 	<div id="card3" collapsible-panel panel-title="Cumulative Probabilities graph. Or: 'Did I just draw a card worth keeping?'" badge-value="" show-badge=false>
				  	<div class="svg-container">
						<svg class="svg-content" id="cumulativeProb" viewBox="0 0 1000 600" preserveAspectRatio="xMinYMin meet" ></svg>
					</div>
				</div>
			 	<div id="card3" collapsible-panel panel-title="More Accurate Cumulative Probabilities graph. Or: 'Did I just draw a card worth keeping?'" badge-value="" show-badge=false>
				  	<div class="svg-container">
						<svg class="svg-content" id="betterCumulativeProb" viewBox="0 0 1000 600" preserveAspectRatio="xMinYMin meet" ></svg>
					</div>
				</div>
			  </div>
			</div>		
		</div>
	</div>
</div>
